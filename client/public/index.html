
<!DOCTYPE html>
<html ng-app="systemAvailability" lang="en">
<head>
  <meta charset="utf-8">
  <title>System availability</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <script src="../js/jquery-1.7.2.min.js"></script>
  <script src="../js/jquery-ui-1.8.21.custom.min.js"></script>
  
  <script src="http://code.angularjs.org/angular-1.0.1.min.js"></script> 
  <script src="http://code.angularjs.org/angular-resource-1.0.1.min.js"></script>
  
  <script src="../js/controllers.js"></script>
  <script src="../js/mongolab.js"></script>
  <link href="../bootstrap/css/bootstrap.css" rel="stylesheet">
  <link href="../css/jquery-ui-1.8.21.custom.css" rel="stylesheet">
  <!--<link href="../css/angular-ui.min.css" rel="stylesheet">-->

</head>

<body ng-controller="TimelineCtrl">
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="#">System availability</a>
        <!--         <div>
        <ul class="nav">
          <li class="active">
            <a href="#">Home</a>
          </li>
          <li>
            <a href="#about">About</a>
          </li>
          <li>
            <a href="#contact">Contact</a>
          </li>
        </ul>
      </div>
      -->
    </div>
  </div>
</div>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span2" ng-repeat="alertline in alertlines">
      <!--alert-block-->
      <div class="alert alert-{{alertline.alerttype}} fade in ">
        <button type="button" class="close" data-dismiss="alert">x</button>
        <h5 class="alert-heading">{{alertline.title}}</h5>
        <p>{{alertline.comment}}</p>
      </div>
    </div>
  </div>

  <div class="row-fluid">
    <div class="span2">  
	  <form> 
		  <fieldset>
			<legend>System status</legend>
			<div class="control-group">
			  <div class="controls">         
			   <label for="system">System</label>            
			   <select name="system" ng-model="systemFormData.system" class="input-medium">
					<option ng-repeat="systemname in systemnames">{{systemname.name}}</option>
			   </select>
			   <label for="status">Status</label>
			   <select name="status" ng-model="systemFormData.status" class="input-medium">
					<option ng-repeat="systemstatus in systemstatuses">{{systemstatus.status}}</option>
				</select>
			   <label for="startDate">Start</label> 
			   <input jq-datepicker id="sidebarStartDate" ng-model="systemFormData.start" class="input-medium">
			   <label for="endDate">End</label> 
			   <input jq-datepicker id="sidebarEndDate" ng-model="systemFormData.end" class="input-medium">
			   <label for="comment">Comment</label>
			   <textarea id="comment" ng-model="systemFormData.comment" class="input-medium"></textarea>
			   <br/>
			   <button class="btn btn-primary" ng-click="updateStatusElement()">Update</button>
			   <button class="btn btn-primary" ng-click="addStatusElement()">New</button>
			   <button class="btn btn-danger" ng-click="removeStatusElement()">Delete</button>
			 </div>
		   </div>
	  </form>      
			 
      <form>
        <fieldset>
          <legend>Alerts</legend>
          <div class="control-group">
            <div class="controls">
              <button class="btn btn-primary" data-toggle="modal" href="#dialogModal">Add alert</button>
			  <button class="btn btn-primary" onClick="init()">ert</button>
            </div>
          </div>
        </fieldset>
      </form>
    </div>

    <div class="span10">
      <div id="systemTableCarousel" class="carousel slide">
        <div class="carousel-inner">
          <div class="active item">
            <table id="systemtab">
              <thead>
                <tr>
                  <th class="month" colspan='{{daysInCurrentMonth() + 1}}'>{{currentMonthName()}}</th>
                </tr>
                <tr>
                  <th class="firstcol week" rowspan="3"></th>
                  <th class="week" ng-repeat="week in currentMonthWeekList" colspan="{{week.colSpan}}">{{week.week}}</th>
                </tr>
                <tr>
                  <th ng-repeat="dayName in dayNamesInCurrentMonth()">{{dayName}}</th>
                </tr>
                <tr>
                  <th ng-repeat="day in currentMonthDayList()">{{day}}</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="systemline in systemlines">
                  <td class="system">
                    <span class="badge badge-info">{{systemline.system}}</span>
                  </td>
                  <td ng-repeat="statusline in systemline.statuslines" colspan="{{statusline.end - statusline.start + 1}}" ng-click="showDetails(systemline, statusline)">
                    <span class="element-inner-{{statusline.status}} element-inner" rel="popover" data-original-title="{{statusline.status}} in {{systemline.system}}" data-content="From: {{statusline.start}} <br/> To: {{statusline.end}} <br/> {{statusline.comment}}"></span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="item">Second item...</div>
          <div class="item">Third item...</div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal hide fade" id="dialogModal">

  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">x</button>
    <h3>Add Alert</h3>
  </div>

  <div class="modal-body">
    <form class="alertForm form-horizontal">
      <fieldset>
        <label for="title">Title</label>
        <input name="title" ng-model="addAlertLine.title">

        <label for="alerttype">Alert Type</label>
        <select name="alerttype" ng-model="addAlertLine.alerttype">
          <option ng-repeat="alerttype in alerttypes">{{alerttype.type}}</option>
        </select>

        <label for="expdate">Expiry Date</label>
        <input type="date" ng-model="addAlertLine.expdate">

        <label for="comment">Comment</label>
        <textarea name="comment" input-xlarge" id="comment" ng-model="addAlertLine.comment"></textarea>
      </fieldset>

    </form>
  </div>

  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a>
    <a href="#" class="btn btn-primary" ng-click="addAlert();" data-dismiss="modal">Save changes</a>
  </div>

</div>

<!-- Placed at the end of the document so the pages load faster -->
<script src="../bootstrap/js/bootstrap.js"></script>
<script src="../bootstrap/js/bootstrap-popover.js"></script>
<script src="../bootstrap/js/bootstrap-collapse.js"></script>
<script type="text/javascript">

    $(function () {

		$('.carousel').carousel('pause');
		//$('.datepicker').datepicker({format:"dd.mm.yyyy", weekStart:1});
		
    });
	
	/*
	function popover(){
		console.log("asdas");
		$("#asd").popover();
	}
	*/
	
	//$('document').ready(init());

    function init(){
      $("span[rel=popover]").popover({placement: 'asda'});
      //$(".collapse").collapse();
    }
	
</script>
	

</body>
</html>